<mat-card id="gn_user">
    <mat-card-content>
        <div class="navigator-row form">
            <mat-form-field floatPlaceholder="never" color="accent">
                <input matInput #filter placeholder="Filter Users" [value]="dataSource.filter" id="gn_user.filter">
            </mat-form-field>
            <span class="spacer-search"></span>
                <span class="spacer"></span><a   mat-icon-button matTooltip = "New" color="primary" (click)="router.navigate( ['/gn_user/new'], { queryParams: { id: 0, mode: 'add' } } )" id="gn_user.new" angular_route="true"><mat-icon aria-label="New">add</mat-icon></a>
            <span class="spacer-search"></span>
            <span id="gn_user.header.paginator">
                <mat-paginator #top_paginator [length]="dataSource.filteredData.length" (page)="pagingEvent( $event )"
                       [pageIndex]="pageIndex" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]">
                </mat-paginator>
            </span>
            <span>
                <button mat-icon-button color="primary" (click)="refresh()" id="gn_user.header.refresh">
                    <mat-icon aria-label="Refresh the view">refresh</mat-icon>
                </button>
            </span>
        </div>
        <mat-table id="gn_user.table" #tableUser [dataSource]="dataSource" matSort class="mat-cell" >
            <!-- U_ACTIVE Column -->
            <ng-container matColumnDef="U_ACTIVE" class="column_U_ACTIVE">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Active user
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_ACTIVE" matTooltip="ID: {{ row.U_ACTIVE }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_ACTIVE_LABEL }}
                </mat-cell>
            </ng-container>
            <!-- U_NAME Column -->
            <ng-container matColumnDef="U_NAME" class="column_U_NAME">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Username
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_NAME" matTooltip="ID: {{ row.U_NAME }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_NAME }}
                </mat-cell>
            </ng-container>
            <!-- U_ROLE Column -->
            <ng-container matColumnDef="U_ROLE" class="column_U_ROLE">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    User role
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_ROLE" matTooltip="ID: {{ row.U_ROLE }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_ROLE_FK.R_ROLE }}
                </mat-cell>
            </ng-container>
            <!-- U_FIRST_NAME Column -->
            <ng-container matColumnDef="U_FIRST_NAME" class="column_U_FIRST_NAME">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    First name
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_FIRST_NAME" matTooltip="ID: {{ row.U_FIRST_NAME }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_FIRST_NAME }}
                </mat-cell>
            </ng-container>
            <!-- U_EMAIL Column -->
            <ng-container matColumnDef="U_EMAIL" class="column_U_EMAIL">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    E-Mail address
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_EMAIL" matTooltip="ID: {{ row.U_EMAIL }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_EMAIL }}
                </mat-cell>
            </ng-container>
            <!-- U_LAST_NAME Column -->
            <ng-container matColumnDef="U_LAST_NAME" class="column_U_LAST_NAME">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Last name
                </mat-header-cell>
                <mat-cell *matCellDef="let row; let i=index;" id="User.U_LAST_NAME" matTooltip="ID: {{ row.U_LAST_NAME }}"
                          (dblclick)="router.navigate( ['/gn_user/edit'], { queryParams: { id: 'U_ID', mode: 'edit', value: row.U_ID } } )">
                    {{ row.U_LAST_NAME }}
                </mat-cell>
            </ng-container>
            <!-- actions -->
            <ng-container matColumnDef="actions">
                <!-- Header buttons -->
                <mat-header-cell *matHeaderCellDef>
                    Options
                </mat-header-cell>
                <!-- Row buttons -->
                <mat-cell *matCellDef="let row; let i=index;" >
                    <span class="spacer"></span><button   mat-icon-button matTooltip = "Delete" color="primary" (click)="deleteRecord( i, row, 'U_NAME' )" id="gn_user.delete"><mat-icon aria-label="Delete">delete</mat-icon></button>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns">
            </mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;">
            </mat-row>
        </mat-table>
        <div class="http-spinner" *ngIf="spinnerService.visibility | async as visibility; else loading_done">
            <div class="http-spinner-inner">
                <mat-spinner [diameter]="50"></mat-spinner>
            </div>
        </div>
        <ng-template #loading_done>
            <div class="no-results" id="no-results" [style.display]="dataSource.renderedData.length == 0 ? '' : 'none'">
                No results
            </div>
        </ng-template>
        <div class="navigator-row">
            <span>
            </span>
            <span class="spacer"></span>
            <span id="gn_user.botton.paginator">
                <mat-paginator #bot_paginator [length]="dataSource.filteredData.length" (page)="pagingEvent( $event )"
                               [pageIndex]="pageIndex" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]">
                </mat-paginator>
            </span>
            <span>
                <button mat-icon-button color="primary" (click)="refresh()" id="gn_user.botton.refresh">
                    <mat-icon aria-label="Refresh the view">refresh</mat-icon>
                </button>
            </span>
        </div>
    </mat-card-content>
</mat-card>

